<template>
  <require from="./correlation-list.css"></require>
  <div class="correlation-container">
    <h3 if.bind="correlations.length === 0" class="correlation-table__empty-message">No correlations found.</h3>
    <table else class="table table-striped table-hover correlation-table">
      <thead>
        <tr class="correlation-table__headlines">
          <th class="correlation-table__headline" click.delegate="sortList(correlationListSortProperty.CorrelationId)">
            Correlation ID <i if.bind="sortSettings.sortProperty === correlationListSortProperty.CorrelationId" class.bind="sortSettings.ascending ? 'fas fa-caret-up' : ' fas fa-caret-down'"></i>
          </th>
          <th class="correlation-table__headline" click.delegate="sortList(correlationListSortProperty.StartedAt)">
            Started at <i if.bind="sortSettings.sortProperty === correlationListSortProperty.StartedAt" class.bind="sortSettings.ascending ? 'fas fa-caret-up' : ' fas fa-caret-down'"></i>
          </th>
          <th class="correlation-table__headline" click.delegate="sortList(correlationListSortProperty.State)">
            State <i if.bind="sortSettings.sortProperty == correlationListSortProperty.State" class.bind="sortSettings.ascending ? 'fas fa-caret-up' : ' fas fa-caret-down'"></i>
          </th>
          <th class="correlation-table__headline" if.bind="false" click.delegate="sortList(correlationListSortProperty.User)">
            User <i if.bind="sortSettings.sortProperty === correlationListSortProperty.User" class.bind="sortSettings.ascending ? 'fas fa-caret-up' : ' fas fa-caret-down'"></i>
          </th>
          <th class="correlation-table__headline" click.delegate="sortList(correlationListSortProperty.ProcessInstanceId)">
            Process Instance ID <i if.bind="sortSettings.sortProperty === correlationListSortProperty.ProcessInstanceId" class.bind="sortSettings.ascending ? 'fas fa-caret-up' : ' fas fa-caret-down'"></i>
          </th>
        </tr>
      </thead>
      <tbody class="correlation-table__body">
        <tr dblclick.delegate="showLogViewer()" class="correlation-table__table-row" repeat.for="tableEntry of sortedTableData" class.bind="tableEntry.processInstanceId === selectedTableEntry.processInstanceId ? 'correlation-table__selected-entry': ''" click.delegate="selectCorrelation(tableEntry)">
          <td class="correlation-table__table-entry">${tableEntry.correlationId}</td>
          <td class="correlation-table__table-entry">${tableEntry.startedAt}</td>
          <td class="correlation-table__table-entry correlation-table__table-entry--state">${tableEntry.state}</td>
          <td if.bind="false" class="correlation-table__table-entry">${tableEntry.user}</td>
          <td class="correlation-table__table-entry">${tableEntry.processInstanceId}</td>
        </tr>
        <tr if.bind="totalCount > 20" class="correlation-table__table-row">
          <td>
            <div class="correlation-table__pagesize-entry">
              PageSize: 
            </div>
            <select class="form-control correlation-table__pagesize-entry--select" value.bind="pageSize">
              <option model.bind="PageSize.twenty">${PageSize.twenty}</option>
              <option model.bind="PageSize.fifty">${PageSize.fifty}</option>
              <option model.bind="PageSize.hundred">${PageSize.hundred}</option>
              <option model.bind="PageSize.twohundred">${PageSize.twohundred}</option>
              <option model.bind="totalCount">${totalCount}</option>
            </select>
          </td>
          <td class="correlation-table__pagination-entry">
            <aubs-pagination page-size.bind="pageSize" total-items.bind="totalCount" current-page.bind="currentPage" boundary-links.bind="true" pagination-size.bind="paginationSize"></aubs-pagination>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</template>
